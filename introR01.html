<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <meta name="author" content="Profesores: Carlos M. González Alcón - Carlos Pérez González   (Área de Estadística e Investigación Operativa - Universidad de La Laguna)" />
  <title>Introducción al R y su utilización para análisis estadístico con Rstudio y Rcommander</title>
  <style type="text/css">code{white-space: pre;}</style>
  <style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
  </style>
  <link rel="stylesheet" type="text/css" media="screen, projection, print"
    href="http://www.w3.org/Talks/Tools/Slidy2/styles/slidy.css" />
  <script src="http://www.w3.org/Talks/Tools/Slidy2/scripts/slidy.js"
    charset="utf-8" type="text/javascript"></script>
</head>
<body>
<div class="slide titlepage">
  <h1 class="title">Introducción al R y su utilización para análisis estadístico con Rstudio y Rcommander</h1>
  <p class="author">
Profesores: Carlos M. González Alcón - Carlos Pérez González <br/> (Área de Estadística e Investigación Operativa - Universidad de La Laguna)
  </p>
</div>
<div class="slide section level1">

<style>

/* slide titles */
.reveal .slides section .slideContent h1 { 
  font-size: 80%;
  color: blue;
}

.reveal h3 { 
  font-size: 80%;
  color: blue;
}

/* heading for slides with two hashes ## */
.reveal .slides section .slideContent h2 {
   font-size: 80%;
   font-weight: bold;
   color: green;
}

/* ordered and unordered list styles */
.reveal ul, 
.reveal ol {
    font-size: 80%;
    color: red;
    list-style-type: square;
}

h1, h2, p, ul, li {
    font-size: 90%;
}

h1 {
  font-size: 40px!important;
}


code.r{
  font-size: 80%;
}
pre {
  font-size: 90%
}


</style>
</div>
<div id="introducción-al-r-y-su-utilización-para-análisis-estadístico-con-rstudio-y-rcommander" class="slide section level1">
<h1><br/><br/><br/><br/>Introducción al R y su utilización para análisis estadístico con Rstudio y Rcommander</h1>
<ol style="list-style-type: decimal">
<li>Introducción al entorno R: instalación y uso básico. Librerías.</li>
<li>Conceptos básicos del lenguaje R: instrucciones sencillas, scripts y funciones sencillas.</li>
<li>Gráficos en R: el comando plot() y librerías específicas.</li>
<li>Introducción a la interfaz Rstudio.</li>
<li>Librería RCommander y técnicas de análisis estadístico.</li>
</ol>
</div>
<div id="introducción-al-entorno-r-instalación-y-uso-básico.-librerías." class="slide section level1">
<h1>1. Introducción al entorno R: instalación y uso básico. Librerías.</h1>
<h2 id="contenidos">Contenidos</h2>
<ul>
<li>¿Qué es R (y qué es lo que no es)?</li>
<li>¿En qué me puede ayudar?</li>
<li>¿Por donde empezamos? R Base y librerías o paquetes. Rstudio</li>
<li>Ya tengo esto instalado...</li>
</ul>
</div>
<div id="qué-es-r-y-qué-es-lo-que-no-es-i" class="slide section level1">
<h1>¿Qué es R (y qué es lo que no es)? (I)</h1>
<ul>
<li>R es un entorno de libre acceso para computación estadística y gráficos así como para programación. Tiene una serie de características que lo hacen bastante asequible cuando empezamos a trabajar por primera vez con él.</li>
<li>Utiliza un lenguaje muy bien desarrollado pero simple.</li>
<li>Su funcionalidad es la de un intérprete de comandos (se ejecutan las instrucciones a medida que las introducimos) y la de un lenguaje de programación (se puede realizar un script o conjunto de instrucciones a modo de programa).</li>
<li>La instalación por primera vez proporciona un entorno básico de R casi sin ninguna dificultad.</li>
<li>Permite un rápido desarrollo de nuevas herramientas para resolver problemas.</li>
<li>Estos desarrollos se distribuyen en forma de librerías que cualquier usuario puede descargar e instalar para personalizar su propio entorno de R.</li>
</ul>
<ul>
<li>R no es un lenguaje de programación que permita realizar aplicaciones ejecutables. Sin embargo, se pueden programar interfaces gráficas para facilitar el uso de los programas a los usuarios pero es preciso que estos tengan instalado R.</li>
</ul>
</div>
<div id="qué-es-r-y-qué-es-lo-que-no-es-y-ii" class="slide section level1">
<h1>¿Qué es R (y qué es lo que no es)? (y II)</h1>
<object data="figure/Rdiagram.svg" type="image/svg+xml" width="80%" height="80%" title="Esquema R y librerías">
</object>
</div>
<div id="en-qué-me-puede-ayudar" class="slide section level1">
<h1>¿En qué me puede ayudar?</h1>
<ul>
<li>Tenemos miedo a utilizar esto y luego venga otra cosa que lo sustituya....</li>
</ul>
<ul>
<li>Sin embargo, si lo pensamos tranquilamente, muchas de las cosas que necesitamos hacer habitualmente (gráficas, problemas de estadística, etc..) no necesitan de un software complicado (SPSS, SAS, etc..).</li>
</ul>
<ul>
<li>Podemos utilizar R para resolver de forma más o menos fácil (depende de lo que hayamos entendido en clase de estadística) muchos de estos problemas. A medida que uno desarrolle trabajos de más dificultad (trabajos, proyectos fin de grado o máster, investigación, etc..) R nos será de mayor utilidad.</li>
</ul>
</div>
<div id="por-donde-empezamos-r-base-y-librerías-o-paquetes.-rstudio" class="slide section level1">
<h1>¿Por donde empezamos? R Base y librerías o paquetes. Rstudio</h1>
<ul>
<li>En principio, se comienza descargando el paquete básico de R (Base R)</li>
<li>Ir a www.r-project.org(http://www.r-project.org) y descarga la versión de RStudio para tu OS.</li>
</ul>
<ul>
<li>El paquete base viene con un conjunto de herramientas básicas de gestión de datos, análisis y funciones gráficas.</li>
</ul>
<ul>
<li>A medida que uno necesita más herramientas, se pueden descargar e instalar entre las +4000 librerías que hay en CRAN las que puedan sernos de ayuda.</li>
<li>Una librería que utilizaremos en este curso es Rcmdr (RCommander). La instalaremos desde el terminal de comandos de R.</li>
</ul>
<ul>
<li>R se puede utilizar básicamente con lo que tenemos en la instalación base (terminal de comandos) pero podemos instalar, de forma adicional, algún otro entorno gráfico que facilite su uso (Rstudio).</li>
<li>Ir a www.rstudio.org(http://www.rstudio.org) y descarga la versión de RStudio para tu OS.</li>
</ul>
</div>
<div id="ya-tengo-esto-instalado...." class="slide section level1">
<h1>Ya tengo esto instalado....</h1>
<ul>
<li>Empezaremos adquiriendo conocimientos básicos de R.</li>
<li>Se trata de iniciarse en el manejo de R (comienza como exploreR para llegar a ser un useR). Hay excelentes tutoriales en internet para mejorar aprendizaje.</li>
<li>Por ejemplo, codeschool tiene este tutorial <a href="http://tryr.codeschool.com/levels/1/challenges/1">online R</a> para ensayar con R solo con el navegador, sin necesidad de instalar nada.</li>
<li>Hay muchos recursos como <a href="http://www.nceas.ucsb.edu/files/scicomp/Dloads/RProgramming/BestFirstRTutorial.pdf">tutorial auto-aprendizaje</a> o <a href="https://wiki.ucl.ac.uk/display/~uctpfos/R-Resources">UCL wiki</a>.</li>
</ul>
<ul>
<li>Aunque la curva de aprendizaje de R puede ser pronunciada, el soporte de la comunidad de usuarios es muy grande.</li>
<li>La comunidad es muy activa en foros, páginas web,...</li>
<li>Buscar en Google una duda siempre retorna algo útil.</li>
<li>Familiarízate con <a href="http://www.stackoverflow.com">stackoverflow</a></li>
<li>Si conoces otro software, hay bastante ayuda para el paso a R</li>
<li><a href="http://dss.princeton.edu/training/RStata.pdf">R para usuarios Stata</a></li>
<li><a href="http://cran.r-project.org/doc/contrib/Hiebeler-matlabR.pdf">R para usuarios Matlab</a></li>
</ul>
</div>
<div id="conceptos-básicos-del-lenguaje-r-instrucciones-sencillas-scripts-y-funciones-sencillas." class="slide section level1">
<h1>2. Conceptos básicos del lenguaje R: instrucciones sencillas, scripts y funciones sencillas.</h1>
<h2 id="contenidos-1">Contenidos</h2>
<ul>
<li>La consola de R. Operaciones elementales</li>
<li>Vectores</li>
<li>Matrices</li>
<li>Otras operaciones de interés con vectores y matrices</li>
<li>Operaciones lógicas (comparaciones)</li>
<li>Estructuras de datos. La instrucción data.frame()</li>
<li>Filtrar conjuntos de registros en un data.frame</li>
<li>Resúmenes por filas y columnas</li>
</ul>
<pre><code>## Warning in file(filename, &quot;r&quot;, encoding = encoding): cannot open file
## &#39;Rcode_presentation.R&#39;: No such file or directory</code></pre>
<pre><code>## Error in file(filename, &quot;r&quot;, encoding = encoding): cannot open the connection</code></pre>
</div>
<div id="la-consola-de-r.-operaciones-elementales-i" class="slide section level1">
<h1>La consola de R. Operaciones elementales (I)</h1>
<ul>
<li>El código R puede ser introducido directamente en la consola de comandos o mediante un script. Por ejemplo, se pueden realizar operaciones aritméticas elementales</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># operaciones básicas</span>
<span class="dv">7</span><span class="op">+</span><span class="dv">3</span>
<span class="dv">7</span><span class="op">*</span><span class="dv">3</span>
<span class="dv">7</span><span class="op">/</span><span class="dv">3</span>
<span class="dv">7</span><span class="op">%%</span><span class="dv">3</span>
<span class="dv">7</span><span class="op">/</span><span class="dv">0</span></code></pre></div>
<ul>
<li>Observar que los comandos están separados con un salto de línea (o también con <code>;</code>). Sin embargo, si el comando comienza con el caracter <code>#</code> esa línea no se ejecuta (p.e., apropiado para añadir comentarios explicativo)</li>
</ul>
<ul>
<li>Todo en R (variables, vectores, funciones, gráficos, fórmulas, ...) son objetos.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># this is an R code chunk that will be revealed incrementally</span>
x&lt;-<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>
y&lt;-<span class="kw">rnorm</span>(<span class="dv">10</span>)</code></pre></div>
</div>
<div id="la-consola-de-r.-operaciones-elementales-ii" class="slide section level1">
<h1>La consola de R. Operaciones elementales (II)</h1>
<ul>
<li>El objeto más elemental es una variable. Para crear una variable (x) debemos asignar un valor (número, palabra, ...) mediante <code>&lt;-</code> or <code>=</code> . Se recomienda <code>&lt;-</code> .</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="dv">3</span></code></pre></div>
<ul>
<li>Tengamos en cuenta que R es sensible a mayúsculas: <code>x</code> es diferente de <code>X</code></li>
</ul>
<ul>
<li>Una reasignación sobreescribe el contenido de la variable</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> &quot;ahora x es una cadena.&quot;</span>
x
x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>,<span class="dv">7</span>,<span class="dv">8</span>)  <span class="co"># c() combina valores en un vector. </span>
x</code></pre></div>
<ul>
<li>Acceder a elementos de un vector <code>x</code> con <code>x[n]</code></li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x
x[<span class="dv">3</span><span class="op">:</span><span class="dv">6</span>] <span class="co"># elementos 3,4,5,6</span>
x[<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">3</span>,<span class="dv">6</span>)] <span class="co"># elts 1,3 y 6</span>
x[<span class="op">-</span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">3</span>,<span class="dv">6</span>)] <span class="co"># todos elts excepto 1,3 y 6</span></code></pre></div>
</div>
<div id="ejercicio-1" class="slide section level1">
<h1>Ejercicio 1</h1>
<ul>
<li>crear un vector x con valores 0, 3, 6, 9, 12, 15, 18</li>
</ul>
<ul>
<li>crear un vector y con las palabras {&quot;mis&quot;,&quot;números&quot;,&quot;favoritos&quot;,&quot;son&quot;}</li>
</ul>
<ul>
<li>crear un vector z con todos los elementos de y los 2 últimos elementos de x</li>
</ul>
<ul>
<li>ejecutar <code>typeof(x)</code>, <code>typeof(y)</code> y <code>typeof(z)</code></li>
</ul>
<ul>
<li>crear un vector w con valores el logaritmo de cada elemento de x</li>
</ul>
</div>
<div id="vectores-i" class="slide section level1">
<h1>Vectores (I)</h1>
<ul>
<li>Veamos algunos ejemplos con vectores</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>)
x<span class="op">+</span><span class="dv">1</span>     <span class="co">#suma 1 a cada elemento del vector</span>
x<span class="op">/</span><span class="dv">2</span>     <span class="co">#divide por 2 cada elemento del vector</span>
<span class="kw">length</span>(x) <span class="co"># número de elementos del vector</span>
<span class="kw">max</span>(x)
<span class="kw">min</span>(x)
<span class="kw">sum</span>(x)  <span class="co">#suma todos los elementos del vector</span>
<span class="kw">log</span>(x)  <span class="co">#aplica la función log() a cada elemento del vector</span></code></pre></div>
<ul>
<li>Observar que estamos utilizando las primeras funciones de R (length, max, min, ...). Si se desea obtener la ayuda en particular de una función debemos escribir <code>?</code> seguido del nombre de la función</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">?sum
?mean</code></pre></div>
</div>
<div id="vectores-ii" class="slide section level1">
<h1>Vectores (II)</h1>
<ul>
<li>Ahora, veamos como son las operaciones entre vectores</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>)
y &lt;-<span class="st"> </span><span class="dv">4</span><span class="op">:</span><span class="dv">6</span> <span class="co"># también se pueden generar secuencias numéricas sin usar c()</span>
x <span class="op">+</span><span class="st"> </span>y
x &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">4</span>
x <span class="op">+</span><span class="st"> </span>y  <span class="co"># R da un warning si se suman de diferente longitud</span>
x &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">3</span>
y &lt;-<span class="st"> </span><span class="dv">4</span><span class="op">:</span><span class="dv">6</span>
x <span class="op">*</span><span class="st"> </span>y  <span class="co"># producto elemento a elemento</span></code></pre></div>
</div>
<div id="matrices" class="slide section level1">
<h1>Matrices</h1>
<ul>
<li>Veamos como se crea una matriz en R:</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">m1 &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="dt">data=</span><span class="dv">1</span><span class="op">:</span><span class="dv">9</span>,<span class="dt">nrow=</span><span class="dv">3</span>,<span class="dt">ncol=</span><span class="dv">3</span>,<span class="dt">byrow=</span><span class="ot">TRUE</span>)
m1
m1[<span class="dv">1</span>,<span class="dv">2</span>]
m1[,<span class="dv">2</span>]
m1[<span class="dv">1</span>,]
m1[<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">3</span>)]</code></pre></div>
<ul>
<li>Seleccionemos partes de una matriz</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dim</span>(m1)
m1[<span class="dv">1</span>,<span class="dv">2</span>]
m1[<span class="dv">2</span>, ]   <span class="co"># fila 2, todas columnas</span>
m1[ ,<span class="dv">1</span>]   <span class="co"># todas las filas, columna 1</span>
m1[<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">3</span>),<span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">3</span>)] <span class="co"># filas 1,3 y columnas 2,3</span></code></pre></div>
<ul>
<li>Algunos ejemplos de operaciones con matrices</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">m1<span class="op">+</span>m1
m1<span class="op">*</span>m1 <span class="co"># de nuevo, producto elemento a elemento</span></code></pre></div>
</div>
<div id="otras-operaciones-de-interés-con-vectores-y-matrices" class="slide section level1">
<h1>Otras operaciones de interés con vectores y matrices</h1>
<ul>
<li>Al contrario que con los vectores, ciertas operaciones con matrices no son posibles</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">m2 &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="dt">data=</span><span class="dv">1</span><span class="op">:</span><span class="dv">12</span>,<span class="dt">nrow=</span><span class="dv">4</span>,<span class="dt">ncol=</span><span class="dv">3</span>,<span class="dt">byrow=</span><span class="ot">FALSE</span>)
m1 <span class="op">+</span><span class="st"> </span>m2  <span class="co"># error</span>
m1 <span class="op">*</span><span class="st"> </span>m2  <span class="co"># error</span></code></pre></div>
<ul>
<li>¿Y las operaciones usuales de vectores (producto escalar) y matrices (prod. matricial)? Se utiliza el operador <code>%*%</code></li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x<span class="op">%*%</span>y
m2 <span class="op">%*%</span><span class="st"> </span>m1
m1 <span class="op">%*%</span><span class="st"> </span><span class="kw">t</span>(m2)
m1 <span class="op">%*%</span><span class="st"> </span>m2</code></pre></div>
<ul>
<li>Para hallar el determinante y la inversa de una matriz</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">m3 &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>),<span class="dt">nrow=</span><span class="dv">2</span>,<span class="dt">ncol=</span><span class="dv">2</span>,<span class="dt">byrow=</span><span class="ot">TRUE</span>)
<span class="kw">det</span>(m3) <span class="co">#determinante</span>
<span class="kw">solve</span>(m3) <span class="co">#inversa</span></code></pre></div>
</div>
<div id="ejercicio-2" class="slide section level1">
<h1>Ejercicio 2</h1>
<ul>
<li>crear una matriz A de 2x2 con la primera fila 2,3 y la segunda 6,7</li>
</ul>
<ul>
<li>crear una matriz b de 2x1 con los elementos 1,5</li>
</ul>
<ul>
<li>resolver la ecuación Ax=b</li>
</ul>
</div>
<div id="operaciones-lógicas-comparaciones" class="slide section level1">
<h1>Operaciones lógicas (comparaciones)</h1>
<ul>
<li>Veamos como se hacen comparaciones en R</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x&lt;-<span class="dv">1</span>
y&lt;-<span class="dv">3</span>
x<span class="op">==</span>y <span class="co"># comparar variables</span>
x<span class="op">&lt;</span>y 
x<span class="op">&gt;</span>y 
x&lt;-<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>)
y&lt;-<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">3</span>,<span class="dv">2</span>,<span class="dv">4</span>)
x<span class="op">==</span>y <span class="co"># comparar vectores</span>
x<span class="op">&lt;</span>y
x<span class="op">&gt;</span>y</code></pre></div>
<ul>
<li>Veamos como obtener los elementos de un vector que satisfacen una condición</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x[x<span class="op">&gt;</span>y]  <span class="co"># elementos de x que son mayores que los corresp. de y</span>
y[x<span class="op">&gt;</span>y]  <span class="co"># elementos de y que son menores que los corresp. de x</span></code></pre></div>
</div>
<div id="ejercicio-3" class="slide section level1">
<h1>Ejercicio 3</h1>
<ul>
<li>Tenemos un vector x con los elementos 1,2,..,9,10 que identifican a 10 personas (vamos a simularlo con sample(1:10,10))</li>
</ul>
<ul>
<li>Tenemos otro vector y con el peso de estas 10 personas (vamos a simularlo con rnorm(10,75,10))</li>
</ul>
<ul>
<li>Hallar el peso de las personas con id. menor o igual a 5</li>
</ul>
<ul>
<li>Hallar las personas con peso menor de 74 kg (determinar la persona y su peso).</li>
</ul>
</div>
<div id="estructuras-de-datos.-la-instrucción-data.frame-i" class="slide section level1">
<h1>Estructuras de datos. La instrucción data.frame() (I)</h1>
<ul>
<li>Un conjunto de datos estándar se representa en R como un data.frame</li>
<li>Es una estructura similar a <code>matrix</code></li>
<li>Las filas son las observaciones y las columnas son las variables (numéricas o categóricas)</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">datos &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">aula=</span><span class="kw">rep</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>,<span class="dt">each=</span><span class="dv">2</span>),<span class="dt">sexo=</span><span class="kw">rep</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>,<span class="dv">3</span>),<span class="dt">horas=</span><span class="kw">rnorm</span>(<span class="dv">6</span>,<span class="dv">8</span>,<span class="dv">2</span>))
<span class="kw">dim</span>(datos)  <span class="co"># hay 6 observaciones y 3 variables</span>
datos </code></pre></div>
<ul>
<li>NOTA: Todas las columnas son de la misma longitud (un data.frame es rectangular, es como una hoja de cálculo)</li>
</ul>
<ul>
<li>Como hemos dicho, un data.frame es similar a una matriz. Por tanto, para acceder a sus elementos lo hacemos de forma parecida.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">datos[<span class="dv">1</span>,]  <span class="co"># observación 1</span>
datos[,<span class="dv">2</span>]  <span class="co"># variable 2</span>
datos[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>,<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>] <span class="co"># ?</span></code></pre></div>
</div>
<div id="estructuras-de-datos.-la-instrucción-data.frame-ii" class="slide section level1">
<h1>Estructuras de datos. La instrucción data.frame() (II)</h1>
<ul>
<li>A las columnas podemos acceder utilizando su nombre</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">datos[,<span class="st">&quot;sexo&quot;</span>] 
datos[,<span class="kw">c</span>(<span class="st">&quot;aula&quot;</span>,<span class="st">&quot;sexo&quot;</span>)]</code></pre></div>
<p>aunque la más habitual es con el operador <code>$</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">datos<span class="op">$</span>sexo      <span class="co"># la columna sexo (como vector de valores)</span>
datos<span class="op">$</span>sexo[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>] <span class="co"># los 3 primeros elementos de sexo</span>
datos<span class="op">$</span>sexo[<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">4</span>,<span class="dv">6</span>)] <span class="co"># ?</span></code></pre></div>
<ul>
<li>Podemos hacer operaciones vectoriales con las variables de un data.frame</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x&lt;-datos<span class="op">$</span>sexo <span class="op">+</span><span class="st"> </span>datos<span class="op">$</span>horas
datos<span class="op">$</span>dias&lt;-<span class="st"> </span>datos<span class="op">$</span>horas<span class="op">/</span><span class="dv">24</span></code></pre></div>
</div>
<div id="filtrar-conjuntos-de-registros-en-un-data.frame" class="slide section level1">
<h1>Filtrar conjuntos de registros en un data.frame</h1>
<ul>
<li>Supongamos que queremos filtrar aquellas filas del dataset 'datos' que verifican una condición determinada (p.e., las filas tales que var1 sea igual a 2 y las filas con var2 igual a 2).</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">datos_filt1&lt;-<span class="kw">subset</span>(datos,aula<span class="op">==</span><span class="dv">2</span>)  <span class="co"># filas del aula 2</span>
datos_filt1
<span class="co">#cond&lt;-datos$aula==2</span>
<span class="co">#datos_filt1&lt;-datos[cond,] # filas con var1=2</span>
<span class="co">#datos_filt1</span>
datos_filt2&lt;-<span class="kw">subset</span>(datos,sexo<span class="op">==</span><span class="dv">1</span>)  <span class="co"># filas del sexo 1</span>
datos_filt2
<span class="co">#cond&lt;-datos$sexo==1</span>
<span class="co">#datos_filt2&lt;-datos[cond,] # filas con sexo=1</span>
<span class="co">#datos_filt2</span></code></pre></div>
<ul>
<li>Si queremos combinar condiciones utilizamos los operadores <code>&amp;</code> (AND) y <code>|</code> (OR). Por ejemplo:</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">datos_filt3&lt;-<span class="kw">subset</span>(datos,aula<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>sexo<span class="op">==</span><span class="dv">2</span>) <span class="co"># filas con aula=1 y sexo=2</span>
<span class="co">#cond&lt;-(datos$var1==2 &amp; datos$var2==2)</span>
<span class="co">#datos_filt3&lt;-datos[cond,] # filas con var1=1 y var2=2</span>
<span class="co">#datos_filt3</span>
datos_filt4&lt;-<span class="kw">subset</span>(datos,aula<span class="op">==</span><span class="dv">1</span> <span class="op">|</span><span class="st"> </span>sexo<span class="op">==</span><span class="dv">2</span>) <span class="co"># filas con aula=1 o sexo=2</span>
<span class="co">#cond&lt;-(datos$var1==2 | datos$var2==2)</span>
<span class="co">#datos_filt4&lt;-datos[cond,] # filas con var1=1 ó var2=2</span>
<span class="co">#datos_filt4</span></code></pre></div>
</div>
<div id="ejercicio-4" class="slide section level1">
<h1>Ejercicio 4</h1>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mascotas &lt;-<span class="st"> </span><span class="kw">data.frame</span>(
<span class="dt">animal=</span><span class="kw">rep</span>(<span class="kw">c</span>(<span class="st">&quot;gato&quot;</span>,<span class="st">&quot;perro&quot;</span>,<span class="st">&quot;mono&quot;</span>),<span class="dt">each=</span><span class="dv">2</span>),
<span class="dt">sexo=</span><span class="kw">rep</span>(<span class="kw">c</span>(<span class="st">&quot;M&quot;</span>,<span class="st">&quot;H&quot;</span>),<span class="dv">3</span>),
<span class="dt">peso=</span><span class="kw">rnorm</span>(<span class="dv">6</span>,<span class="dv">15</span>,<span class="dv">5</span>)
)</code></pre></div>
<ul>
<li>Filtro por una variable: Filtrar las 'mascotas' de tipo 'gato'. ¿Cuántos animales hay?</li>
</ul>
<ul>
<li>Suma agrupada: Hallar la suma de todos los pesos de cada animal (animal='perro', animal='gato',animal='mono'). ¿Cuál es el máximo de las sumas agrupadas por animal?</li>
</ul>
<ul>
<li>Media de una variable por grupos: Hallar el peso medio de cada animal.</li>
</ul>
</div>
<div id="resúmenes-por-filas-y-columnas" class="slide section level1">
<h1>Resúmenes por filas y columnas</h1>
<ul>
<li>Se pueden sumar los valores de las columnas o las filas con las siguientes instrucciones</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">colSums</span>(datos)
<span class="kw">rowSums</span>(datos) <span class="co">#sólo funciona si todas las variables son numéricas</span></code></pre></div>
<ul>
<li>Sin embargo, a veces queremos sumar los valores de una variable agrupados de acuerdo a una variable categórica. Por ejemplo, sumar todas las horas para cada aula o cada sexo en 'datos'.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">by</span>(datos[,<span class="st">&quot;horas&quot;</span>],datos[,<span class="st">&quot;aula&quot;</span>],sum) <span class="co"># suma las horas para cada aula</span>
<span class="kw">by</span>(datos[,<span class="dv">3</span>],datos[,<span class="dv">1</span>],sum) <span class="co"># cuidado con esta forma que puede dar lugar a errores</span></code></pre></div>
<ul>
<li>En R puede haber múltiples instrucciones para sumar por grupos.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">aggregate</span>(horas<span class="op">~</span>aula,sum,<span class="dt">data=</span>datos) <span class="co"># utilizando una fórmula</span></code></pre></div>
</div>
<div id="ejercicio-5" class="slide section level1">
<h1>Ejercicio 5</h1>
<ul>
<li>Suma agrupada: Hallar la suma de todos los pesos de cada animal (animal='perro', animal='gato',animal='mono').</li>
</ul>
<ul>
<li>Media de una variable por grupos: Hallar el peso medio de cada animal.</li>
</ul>
</div>
</body>
</html>

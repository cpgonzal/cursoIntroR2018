<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <meta name="author" content="Profesores: Carlos M. González Alcón - Carlos Pérez González   (Dpto. de Matemáticas, Estadística e Investigación Operativa - Universidad de La Laguna)" />
  <title>Introducción al R y su utilización para análisis estadístico con Rstudio y Rcommander</title>
  <style type="text/css">code{white-space: pre;}</style>
  <style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
  </style>
  <link rel="stylesheet" type="text/css" media="screen, projection, print"
    href="http://www.w3.org/Talks/Tools/Slidy2/styles/slidy.css" />
  <script src="http://www.w3.org/Talks/Tools/Slidy2/scripts/slidy.js"
    charset="utf-8" type="text/javascript"></script>
</head>
<body>
<div class="slide titlepage">
  <h1 class="title">Introducción al R y su utilización para análisis estadístico con Rstudio y Rcommander</h1>
  <p class="author">
Profesores: Carlos M. González Alcón - Carlos Pérez González <br/> (Dpto. de Matemáticas, Estadística e Investigación Operativa - Universidad de La Laguna)
  </p>
  <p class="date">Día 3</p>
</div>
<div class="slide section level1">

<style>

/* slide titles */
.reveal .slides section .slideContent h1 { 
  font-size: 80%;
  color: blue;
}

.reveal h3 { 
  font-size: 80%;
  color: blue;
}

/* heading for slides with two hashes ## */
.reveal .slides section .slideContent h2 {
   font-size: 80%;
   font-weight: bold;
   color: green;
}

/* ordered and unordered list styles */
.reveal ul, 
.reveal ol {
    font-size: 80%;
    color: red;
    list-style-type: square;
}

h1, h2, p, ul, li {
    font-size: 90%;
}

h1 {
  font-size: 40px!important;
}


code.r{
  font-size: 80%;
}
pre {
  font-size: 90%
}


</style>
</div>
<div id="introducción-a-la-interfaz-rstudio." class="slide section level1">
<h1>1. Introducción a la interfaz Rstudio.</h1>
<h2 id="contenidos">Contenidos</h2>
<ul>
<li>¿Qué es RStudio?</li>
<li>Vistazo rápido y características de RStudio</li>
<li>Instalación de RStudio</li>
<li>Descripción del entorno</li>
<li>Cargar datos en Rstudio</li>
<li>Datos cargados en RStudio</li>
<li>Guardar datos en formato CSV</li>
<li>El directorio de trabajo</li>
<li>Gestión del historial</li>
<li>Primer script en RStudio</li>
<li>Usando la ayuda</li>
<li>Extracción y ejecución de funciones</li>
<li>Ejecutando funciones propias</li>
<li>Secciones, plegado y navegación de código</li>
<li>Navegación de código</li>
<li>Visualización de datos</li>
<li>Instalación de paquetes en RStudio</li>
<li>Opciones de la pestaña <strong>Plot</strong></li>
<li>El comando <code>manipulate</code></li>
<li>Generando informes HTML a partir de scripts de R</li>
<li>Otros aspectos de R</li>
<li>Proyecto dentro de RStudio</li>
<li>Atajos de teclado</li>
<li>Ejercicios</li>
<li>Futuro de RStudio</li>
<li>Referencias</li>
</ul>
</div>
<div id="qué-es-rstudio" class="slide section level1">
<h1>¿Qué es RStudio?</h1>
<ul>
<li>RStudio es una herramienta <strong>IDE (<em>Integrated Development Environment</em>)</strong> para <strong>R</strong>, libre y gratuita que facilita:</li>
<li>Trabajar con R y gráficos de R de forma interactiva.</li>
<li>Organizar el código y mantener múltiples proyectos.</li>
<li>Gestión de los paquetes de R (instalación, actualización,..).</li>
<li>Crear y compartir informes (utilizando un lenguaje llamado markdown).</li>
<li>Compartir código y colaborar con otros usuarios.</li>
<li>RStudio también se ofrece como herramienta comercial para empresas (ofreciendo la empresa desarrolladora servicios adicionales de consultoría y formación).</li>
<li>RStudio <strong>NO</strong> realiza ninguna operación estadística. Solo facilita realizar dichas operaciones sobre R.</li>
</ul>
<center>
<img src="figure/RStudio_preview.png" width="80%" alt="RStudio"/>
</center>
</div>
<div id="instalación-de-rstudio" class="slide section level1">
<h1>Instalación de RStudio</h1>
<ul>
<li>Antes de instalar RStudio, necesitas instalar <strong>R</strong>. Se puede obtener desde:</li>
<li><a href="http://cran.r-project.org">cran.r-project.org</a></li>
<li>Una vez instalado R, se puede instalar RStudio en tu ordenador (versión <strong>Desktop</strong>) dependiendo del sistema operativo:</li>
<li><a href="http://www.rstudio.com/ide/download/desktop">www.rstudio.com/ide/download/desktop</a></li>
<li>Solo en Linux, también se puede instalar <strong>RStudio Server</strong>, el cual permite acceder al entorno desde un navegador web:</li>
<li><a href="http://www.rstudio.com/ide/server">www.rstudio.com/ide/server</a></li>
</ul>
</div>
<div id="características-de-rstudio" class="slide section level1">
<h1>Características de Rstudio</h1>
<ul>
<li>Integración de la consola de R dentro de Rstudio (se pueden teclear comandos de R directamente).</li>
<li>Ejecución de código (permite ejecutar código directamente desde un fichero de script).</li>
<li>Resaltado de la sintaxis (realiza una coloración automática de los instrucciones y de las funciones).</li>
<li>Ayuda con los paréntesis, corchetes y comillas (autocompleta estos símbolos al abrirlos).</li>
<li>Completado de comandos (completa los comandos mientras se escriben usando la tecla <code>Tab</code>).</li>
<li>Atajos de teclado (al final de la presentación).</li>
<li>Navegador de objetos (se pueden inspeccionar todos los objetos de la sesión de R).</li>
<li>Gestión del historial de comandos.</li>
<li>Navegación del código en la ventana de script (mediante secciones que finalizan en <code>----</code>).</li>
<li>Importación y visualización de datos.</li>
<li>Integración de gráficos (manipulación, zoom y exportación).</li>
<li>Otros aspectos destacables son la gestión de proyectos (se puede cambiar de un proyecto a otro fácilmente), el control de versiones (se integra bien con <code>git</code> y <code>svn</code>) y la generación de documentos (tipo PDF, HTML y otros más avanzados con un solo click).</li>
</ul>
</div>
<div id="descripción-del-entorno" class="slide section level1">
<h1>Descripción del entorno</h1>
<center>
<img src="figure/RStudio_panels.png" width="80%" alt="Paneles de RStudio"/>
</center>
</div>
<div id="cargar-datos-en-rstudio" class="slide section level1">
<h1>Cargar datos en Rstudio</h1>
<ul>
<li>Vamos a cargar unos datos para poder empezar a trabajar:</li>
</ul>
<center>
<img src="figure/Import_DataSet.png" alt="Importar datos"/>
</center>
<ul>
<li>Aquí podemos elegir:</li>
<li>Cargar los datos desde un fichero de texto (<strong>From Text File…</strong>).</li>
<li>O desde una URL de una web (<strong>From Web URL…</strong>).</li>
</ul>
<ul>
<li>Desde esta URL podemos descargar el fichero <code>ddt.txt</code>, o usarla directamente:<br />
</li>
<li><a href="http://cpgonzal.github.io/cursoIntroR2015/ddt.txt" class="uri">http://cpgonzal.github.io/cursoIntroR2015/ddt.txt</a></li>
</ul>
<!---
[https://www.dropbox.com/s/idlz8w9v89ox0v5/ddt.txt?dl=0](https://www.dropbox.com/s/idlz8w9v89ox0v5/ddt.txt?dl=0)
-->
</div>
<div id="el-fichero-ddt.txt" class="slide section level1">
<h1>El fichero <code>ddt.txt</code></h1>
<ul>
<li>En este archivo se recogen las siguientes variables sobre una muestra de n=144 peces de río para un estudio de concentración de DDT:</li>
<li><code>group</code>: Grupo de observaciones (mediciones en dos temporadas).</li>
<li><code>location</code>: Código del lugar de medición (hay tres lugares: 1,2,3).</li>
<li><code>location_name</code>: Lugar de medición (Afluente, CursoM, Desemboca).</li>
<li><code>species</code>: Código de especie (de 1 a 3).</li>
<li><code>species_name</code>: Nombre de la especie del pez.</li>
<li><code>length</code>: Longitud del pez.</li>
<li><code>weight</code>: Peso del pez.</li>
<li><code>DDT_conc</code>: Concentración de DDT (% de peso) medida.</li>
</ul>
<center>
<img src="figure/Import_DataSet_ddt_v2.png" width="80%" alt="Importar datos"/>
</center>
<ul>
<li>RStudio deduce casi todas las opciones de importación:</li>
<li><strong>Heading</strong>: si trae el nombre de la variable.</li>
<li><strong>Separator</strong>: tipo de separador entre datos.</li>
<li><strong>Decimal</strong>: símbolo para el punto decimal.</li>
<li><strong>Quote</strong>: símbolo para los comentarios.</li>
<li>Al final, los datos se cargan en un <code>data.frame</code> de R con el mismo nombre que el fichero de datos (<code>ddt</code>).</li>
</ul>
</div>
<div id="datos-cargados-en-rstudio" class="slide section level1">
<h1>Datos cargados en RStudio</h1>
<center>
<img src="figure/ddt_data_frame_v2.png" width="80%" alt="Importar datos"/>
</center>
<ul>
<li>Los datos cargados se muestran en el panel superior izquierdo, y en el panel de espacio de trabajo (o entorno).</li>
<li>Vamos a guardar estos datos en un fichero CSV (<em>comma separated values</em>).</li>
<li>Para ello, empezaremos a usar la consola de R, y las funciones incorporadas de completado de comandos y de nombres de carpetas/ficheros.</li>
</ul>
</div>
<div id="guardar-datos-en-formato-csv" class="slide section level1">
<h1>Guardar datos en formato CSV</h1>
<ul>
<li>Tecleamos el comando <code>write</code> en la consola R, y pulsamos la tecla de tabulación <code>Tab</code>:</li>
</ul>
<center>
<img src="figure/write_csv.png" alt="Guardar en CSV (datos)"/>
</center>
<ul>
<li>La característica de RStudio que hemos usado se denomina <strong>completado de comandos</strong>.</li>
<li>De las opciones que nos ofrece, seleccionamos <code>write.csv</code>, y seguimos escribiendo un paréntesis <code>(</code>, que RStudio completará con otro párentesis <code>)</code>.</li>
</ul>
<ul>
<li>Continuamos escribiendo el comando, indicando en el primer parámetro el objeto <code>ddt</code>, y en el segundo parámetro, el nombre del fichero a guardar.</li>
</ul>
<ul>
<li>La función que hemos usado ahora se denomina <strong>completado de carpetas/ficheros</strong>.</li>
<li>Como nombre del fichero, ponemos el nombre <code>ddt.csv</code>.</li>
<li>Terminamos de escribir el comando con el último parámetro, para indicar que no queremos que guarde el nombre (número) de cada fila:</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">write.csv</span>(ddt, <span class="st">&quot;ddt.csv&quot;</span>, <span class="dt">row.names=</span><span class="ot">FALSE</span>)</code></pre></div>
</div>
<div id="el-directorio-de-trabajo" class="slide section level1">
<h1>El directorio de trabajo</h1>
<ul>
<li>Si no lo hemos configurado previamente, este archivo csv no se ha copiado en el directorio <code>cursoR</code>.</li>
</ul>
<ul>
<li>En R (y Rstudio), existe lo que se conoce como <strong>directorio de trabajo</strong> y que representa el directorio donde (por defecto) se cargan, se graban, etc.. los archivos en caso de no especificar una ruta (path) para el archivo.</li>
</ul>
<ul>
<li>Este directorio se consulta con el comando <code>getwd()</code>. Si queremos cambiarlo utiliamos el comando <code>setwd(ruta_a_carpeta)</code>.</li>
</ul>
<ul>
<li>En Rstudio lo cambiamos fácilmente en la opción <code>More</code> de la ventana de ficheros, una vez que nos hemos situado dentro del directorio deseado.</li>
</ul>
<center>
<img src="figure/set_working_directory.png" alt="Cambiar directorio de trabajo"/>
</center>
<ul>
<li>También podemos especificar la ruta de búsqueda del fichero en <code>write.csv</code> pulsando <code>Tab</code> en el segundo argumento de la función.</li>
</ul>
<ul>
<li>Podemos ver el fichero creado, y haciendo clic sobre él, nos mostrará el contenido:</li>
</ul>
<center>
<img src="figure/ddt_csv.png" alt="Data frame ddt"/>
</center>
</div>
<div id="gestión-del-historial" class="slide section level1">
<h1>Gestión del historial</h1>
<ul>
<li>Hay tres formas para re-usar los comandos ya tecleados en RStudio:</li>
<li>Pulsando las teclas de fecla arriba o abajo.</li>
<li>Pulsando <strong>Ctrl+▲</strong>.</li>
</ul>
<center>
<img src="figure/History_Ctrl+Up.png" alt="Historial con Ctrl+Up"/>
</center>
<ul>
<li>Explorando la pestaña <strong>History</strong> en el panel derecho superior:</li>
</ul>
<center>
<img src="figure/History.png" alt="Historial"/>
</center>
<ul>
<li>Se puede seleccionar un comando o varios (usando la tecla <code>Shift</code>=<code>Mayúsc</code>), y ejecutar pulsando <code>Enter</code>.</li>
<li>Asimismo, se pueden salvar a un fichero llamado <code>.Rhistory</code>, en la carpeta del proyecto.</li>
<li>También se pueden pasar a la consola con el comando <strong>To Console</strong> para ser ejecutados, o a un script directamente con el botón <strong>To Source</strong>.</li>
<li>Por último, se pueden eliminar con la tecla <code>Supr</code> (<code>Del</code>) o con el botón correspondiente, o borrar completamente todo el historial con el botón de la escoba.</li>
</ul>
</div>
<div id="primer-script-r-en-rstudio" class="slide section level1">
<h1>Primer script R en RStudio</h1>
<ul>
<li>Una vez cargados los datos, vamos a escribir el primer script en lenguaje R para hacer un primer análisis.</li>
<li>Hacemos click en el icono <strong>+</strong> verde del editor de scripts (izquierdo superior), y elegimos <strong>R Script</strong>.</li>
</ul>
<center>
<img src="figure/New_R_script.png" alt="Nuevo script de R"/>
</center>
<center>
<img src="figure/Untitled1.png" alt="Untitled1"/>
</center>
<ul>
<li>Las acciones más interesantes sobre un script de R son:</li>
<li><strong>Disco</strong>: salvar el fichero.</li>
<li><strong>Lupa</strong>: buscar y reemplazar.</li>
<li><strong>Varita mágica</strong>: herramientas útiles (algunas las veremos luego).</li>
<li><strong>Run</strong>: ejecuta el código seleccionado (<strong>Ctrl+Enter</strong>).</li>
<li><strong>Re-Run</strong>: ejecuta el último código que seleccionamos.</li>
<li><strong>Cuaderno</strong>: compila el script R a un fichero HTML (lo veremos luego).</li>
</ul>
<ul>
<li>Las opciones del tipo <strong>Source</strong> sirven para cargar el código fuente al espacio de trabajo de R (lo veremos luego).</li>
<li>Vamos a introducir los primeros comandos R en el script:</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># estructura de los datos</span>
<span class="kw">str</span>(ddt)

<span class="co"># resumen de los datos</span>
<span class="kw">summary</span>(ddt)</code></pre></div>
<ul>
<li>Guardamos este script pulsando el botón del disco (arriba), o en el menú <strong>File &gt; Save</strong>, con el nombre <code>funciones.R</code> en el directorio <code>R</code> de nuestro proyecto.</li>
</ul>
<center>
<img src="figure/funciones_R.png" alt="funcionesR"/>
</center>
<ul>
<li>Una vez guardado, podemos ejecutar el script de varias formas:</li>
<li>Sobre la línea en la que estamos, pulsamos el botón <strong>Run</strong> o <strong>Ctrl+Enter</strong>.</li>
<li>O seleccionamos todo el script, y hacemos lo mismo que en el punto anterior.</li>
</ul>
<center>
<img src="figure/Run_funciones_R.png" alt="Ejecutar funcionesR"/>
</center>
</div>
<div id="usando-la-ayuda" class="slide section level1">
<h1>Usando la ayuda</h1>
<ul>
<li>Ahora es buen momento para empezar a usar la ayuda para, por ejemplo, el comando <code>summary</code>:</li>
</ul>
<center>
<img src="figure/Help_summary.png" alt="Ayuda de summary"/>
</center>
</div>
<div id="extracción-de-funciones" class="slide section level1">
<h1>Extracción de funciones</h1>
<ul>
<li>Una de las características más interesantes de RStudio es la posibilidad de crear funciones a partir de trozos de código.</li>
<li>Por ejemplo, vamos a crear una función llamada <code>Resumen</code>, que recibe un parámetro <code>datos</code>, y ejecuta los dos comandos que acabamos de escribir.</li>
<li>Para ello, cambiamos <code>ddt</code> por <code>datos</code> en ambos comandos.</li>
<li>Seleccionamos las líneas del código.</li>
<li>Pulsamos sobre la “varita mágica” en la opción <strong>Extract Function</strong>, y le damos el nombre <code>Resumen</code>.</li>
</ul>
<center>
<img src="figure/Extract_Function.png" alt="Extraer función"/>
</center>
<ul>
<li>Añadimos finalmente un comentario para describir el objetivo de la función.</li>
<li>Por último, salvamos el script.</li>
</ul>
<center>
<img src="figure/function_Resumen.png" alt="Function Resumen"/>
</center>
</div>
<div id="ejecutando-funciones-propias" class="slide section level1">
<h1>Ejecutando funciones propias</h1>
<ul>
<li>Si tecleamos la siguiente línea en la consola de R, nos dará un error:</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">Resumen</span>(ddt)</code></pre></div>
<pre><code>## Error in Resumen(ddt): could not find function &quot;Resumen&quot;</code></pre>
<ul>
<li>Esto sucede porque la función Resumen no ha sido cargada (<em>sourced</em>) al entorno o espacio de trabajo de nuestro proyecto.</li>
<li>Para poder usar la función <code>Resumen(datos)</code> tenemos que hacer lo siguiente:</li>
</ul>
<center>
<img src="figure/Source_Resumen.png" alt="Source Resumen"/>
</center>
<ul>
<li>Si hubiéramos elegido la opción <strong>Source with Echo</strong>, obtendríamos el mismo resultado además de mostrar todo el código cargado.</li>
<li>Las funciones cargadas aparecen, al igual que los datos, en el panel derecho superior de <strong>Environment</strong>, en la sección de <strong>Functions</strong>.</li>
<li>Ya podemos usar nuestra nueva función <code>Resumen</code> pasándole como parámetro los datos de <code>ddt</code>:</li>
</ul>
<center>
<img src="figure/Console_Resumen.png" alt="Consola Resumen"/>
</center>
<ul>
<li>Si vamos a estar cambiando la función continuamente, podemos activar la opción <strong>Source on Save</strong> para que la cargue al entorno automáticamente después de salvar el script.</li>
</ul>
</div>
<div id="secciones-del-código" class="slide section level1">
<h1>Secciones del código</h1>
<ul>
<li>Otra característica interesante de RStudio (y no de R) es la posibilidad de estructurar el código en secciones.</li>
<li>Las secciones se pueden crear desde el menú <strong>Code &gt; Insert Section</strong>, o simplemente poniendo un comentario (<code>#</code>) con un nombre de sección y acabado en 4 guiones (<code>----</code>):</li>
</ul>
<pre><code># &lt;NombreDeLaSección&gt; ----</code></pre>
<ul>
<li>Podemos aprovechar el comentario de la función Resumen para hacer nuestra primera sección:</li>
</ul>
<center>
<img src="figure/Section_Resumen.png" alt="Sección Resumen"/>
</center>
<ul>
<li>Fíjense que dicha sección aparece en la parte inferior del editor como <strong>navegación del código</strong>, que luego veremos.</li>
</ul>
</div>
<div id="plegado-de-códigosecciones" class="slide section level1">
<h1>Plegado de código/secciones</h1>
<ul>
<li>Otra característica muy útil de RStudio es el plegado de las secciones o de partes del código que estén rodeadas por llaves <code>{}</code>.</li>
<li>Al plegarse aparecerá un pequeño triángulo que permite colapsar o expandir el bloque de código.</li>
</ul>
<center>
<img src="figure/Folded_Resumen.png" alt="Código plegado de Resumen"/>
</center>
</div>
<div id="navegación-de-código" class="slide section level1">
<h1>Navegación de código</h1>
<ul>
<li>La navegación de código en RStudio es una utilidad que permite editar el código de forma más rápida.</li>
<li>Se puede acceder a una línea concreta pulsando <strong>Alt+Shift+G</strong>, o en el menú <strong>Edit &gt; Go to Line…</strong></li>
<li>Con la opción <strong>Code &gt; Jump To…</strong> (<strong>Alt+Shift+J</strong>) se puede saltar directamente a funciones o secciones del código.</li>
</ul>
<center>
<img src="figure/Jump_To.png" alt="Navegación código Jump To"/>
</center>
<ul>
<li>Otra opción muy útil es la de ir a un fichero/función determinado usando <strong>Code &gt; Go To File/Function</strong> (<strong>Ctrl+.</strong>). RStudio mostrará todos los ficheros o funciones dentro del directorio de trabajo que empiecen con los caracteres tecleados.</li>
</ul>
<center>
<img src="figure/Go_To_File_Function.png" alt="Navegación código Go To File/Function"/>
</center>
</div>
<div id="visualización-de-datos" class="slide section level1">
<h1>Visualización de datos</h1>
<ul>
<li>La visualización (o dibujado de gráficos) es una parte esencial del análisis de datos. RStudio tiene un panel específico para la visualización de datos (<strong>Plots</strong>) abajo a la derecha.</li>
<li>Para ilustrar el manejo de las instrucciones de visualización, vamos a usar escribir el siguiente código dentro de nuestro script de R debajo de la función <code>Resumen</code>:</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># cargamos los datos del fichero</span>
<span class="kw">getwd</span>()
ddt  &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;ddt.txt&quot;</span>,<span class="dt">sep=</span><span class="st">&quot;&quot;</span>)

<span class="co"># pesos de la especie “catfish”</span>
catfish.weight  &lt;-<span class="st"> </span>ddt<span class="op">$</span>weight[ddt<span class="op">$</span>species_name <span class="op">==</span><span class="st"> &quot;catfish&quot;</span>]

<span class="co"># histograma del peso de los “catfish”</span>
<span class="kw">hist</span>(catfish.weight)</code></pre></div>
<div class="figure">
<img src="assets/fig/Histograma-1.png" />

</div>
<ul>
<li>Al teclear <code>ddt$</code> podemos pulsar la tecla <code>Tab</code> para que nos muestre la lista de variables de ddt. Esto se denomina <strong>completado de objetos</strong>.</li>
</ul>
</div>
<div id="instalación-de-paquetes-en-rstudio" class="slide section level1">
<h1>Instalación de paquetes en RStudio</h1>
<ul>
<li>Antes de ver el comando <code>qplot</code>, tenemos que aprender como instalar nuevos paquetes de R.</li>
<li>Una de las pestañas más interesantes en el lado derecho es <strong>Packages</strong> (paquetes):</li>
</ul>
<center>
<img src="figure/Packages.png" alt="Packages"/>
</center>
<ul>
<li><strong>Check for Updates</strong>: permite actualizar los paquetes a sus últimas versiones.</li>
<li><strong>Install Packages</strong>: permite instalar paquetes desde <strong>CRAN</strong> (repositorio).</li>
</ul>
<center>
<img src="figure/Install_Packages.png" alt="Instalación de paquetes"/>
</center>
<ul>
<li>Se puede conseguir el mismo efecto con el siguiente comando:</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">install.packages</span>(<span class="st">&quot;&lt;Nombre_de_la_librería&gt;&quot;</span>)</code></pre></div>
</div>
<div id="opciones-de-la-pestaña-plot" class="slide section level1">
<h1>Opciones de la pestaña <strong>Plot</strong></h1>
<ul>
<li>Con la opción <strong>Zoom</strong> se abre una nueva ventana con una versión más grande del gráfico.</li>
<li>El botón <strong>Export</strong> nos permite guardar el gráfico como una imagen en varios formatos (PNG, JPEG, TIFF, etc) o como un fichero PDF.</li>
<li>También podemos copiar el gráfico actual al portapapeles del sistema.</li>
<li>En caso de haber generado varios gráficos, las flechas permiten avanzar o retroceder en la visualización de dichos gráficos.</li>
</ul>
<center>
<img src="figure/Save_Plot_as_Image.png" width="50%" alt="Save Plot as Image"/>
</center>
</div>
<div id="el-comando-manipulate" class="slide section level1">
<h1>El comando <code>manipulate</code></h1>
<ul>
<li>RStudio permite controlar de forma dinámica los gráficos generados con R.</li>
<li>El comando que permite la interactividad entre el usuario y los gráficos generados.</li>
<li>Las opciones de controles que permite <code>manipulate</code>:</li>
<li><code>slider</code>: control para un rango (min, max) numérico.</li>
<li><code>picker</code>: control sobre un conjunto de opciones fijas.</li>
<li><code>checkbox</code>: control de casilla de verificación.</li>
<li><code>button</code>: control de botón.</li>
<li>Vamos a ver un pequeño ejemplo:</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># control de selección para elegir la especie de pez</span>
<span class="kw">library</span>(manipulate)
<span class="kw">manipulate</span>(
  <span class="kw">hist</span>(ddt<span class="op">$</span>weight[ddt<span class="op">$</span>species_name <span class="op">==</span><span class="st"> </span>fish], <span class="dt">xlab=</span><span class="st">&quot;Peso&quot;</span>, <span class="dt">ylab=</span><span class="st">&quot;Frecuencia&quot;</span>, 
       <span class="dt">main=</span><span class="kw">paste</span>(<span class="st">&quot;Histograma del peso de los&quot;</span>, fish)),
  <span class="dt">fish =</span> <span class="kw">picker</span>(<span class="st">&quot;bass&quot;</span>, <span class="st">&quot;buffalo&quot;</span>, <span class="st">&quot;catfish&quot;</span>)
  )</code></pre></div>
<center>
<img src="figure/manipulate.png" alt="Ejemplo de manipulate"/>
</center>
</div>
<div id="generando-informes-html-a-partir-de-scripts-de-r" class="slide section level1">
<h1>Generando informes HTML a partir de scripts de R</h1>
<ul>
<li>RStudio posee una opción que permite compilar un fichero script de R en HTML directamente (<strong>Compile Notebook</strong>).</li>
<li>Dicha opción se encuentra, en cualquier script de R, al final de la barra de herramientas del panel de edición, con forma de cuaderno, o en la opción del menú <strong>File &gt; Compile Notebook...</strong></li>
<li>Al pulsar el icono, nos aparece la siguiente ventana:</li>
</ul>
<center>
<img src="figure/Compile_Notebook_from_R_script.png" alt="Generando HTML desde el script de R"/>
</center>
<ul>
<li>Pulsamos el boton <strong>Compile</strong> y obtenemos la vista previa del fichero HTML generado:</li>
</ul>
<center>
<img src="figure/Preview_HTML.png" alt="Vista previa del informe HTML"/>
</center>
</div>
<div id="otros-aspectos-de-r" class="slide section level1">
<h1>Otros aspectos de R</h1>
<h2 id="proyecto-dentro-de-rstudio">Proyecto dentro de RStudio</h2>
<ul>
<li>Para crear un proyecto, vamos a la esquina derecha de la barra de herramientas:</li>
</ul>
<center>
<img src="figure/New_Project_toolbar.png" alt="Proyecto de RStudio"/>
</center>
<ul>
<li>También podemos hacer lo mismo desde <strong>File &gt; New Project...</strong></li>
<li>Le vamos a poner el nombre <strong>proyectoR</strong>.</li>
</ul>
<center>
<img src="figure/Create_Project_From.png" width="40%" alt="Crear nuevo proyecto"/> <img src="figure/Empty_Project.png" width="40%" alt="Proyecto vacío"/> <img src="figure/Create_New_Project.png" width="40%" alt="Nombre del nuevo proyecto"/> <img src="figure/proyectoR.png" width="80%" alt="proyectoR"/>
</center>
<h3 id="directorios-del-proyecto">Directorios del proyecto</h3>
<ul>
<li>Normalmente, para proyectos simples, podemos poner todos los ficheros (scripts de R, datos, docs, informes, etc) en la misma carpeta del proyecto.</li>
<li>Sin embargo, es una buena práctica, crear los siguientes directorios en cada proyecto:</li>
<li><code>R</code>: contendrá los scripts de R que se vayan desarrollando.</li>
<li><code>data</code>: almacenará los datos necesarios para realizar los análisis.</li>
<li><code>doc</code>: contendrá toda la documentación necesario para los análisis.</li>
<li><code>informes</code>: carpeta que guardará los informes generados por los análisis.</li>
<li>En principio, solo vamos a crear las carpetas <code>R</code> y <code>data</code>.</li>
</ul>
<ul>
<li>Vamos al panel de ficheros:</li>
</ul>
<center>
<img src="figure/New_Folder.png" alt="Nueva carpeta"/>
</center>
<ul>
<li>Hacemos clic en <strong>New Folder</strong>, y le damos el nombre <code>R</code>.</li>
<li>Haremos lo mismo para crear la carpeta <code>data</code>.</li>
<li>Por tanto, la carpeta del proyecto quedaría como:</li>
</ul>
<center>
<img src="figure/proyectoR_folder.png" alt="Carpeta proyectoR"/>
</center>
<h2 id="atajos-de-teclado">Atajos de teclado</h2>
<ul>
<li>Como se ha visto a lo largo de este curso sobre RStudio, existen múltiples formas de realizar la misma acción dentro del entorno, a saber, desde los botones, el menú o los atajos de teclado.</li>
<li>En cada apartado, se han ido comentado algunos atajos de teclado que pueden resultar interesantes.</li>
<li>La tabla que contiene todos los atajos se puede obtener en el menú <a href="file:///C:/Program%20Files/RStudio/www/docs/keyboard.html"><strong>Help &gt; Keyboard Shortcuts</strong></a>.</li>
</ul>
<center>
<img src="figure/Keyboard_Shortcuts.png" width="80%" alt="Atajos de teclado"/>
</center>
</div>
<div id="ejercicios" class="slide section level1">
<h1>Ejercicios</h1>
<ol style="list-style-type: decimal">
<li>Hacer una función que use el comando <code>manipulate</code> sobre el comando <code>qplot</code>para que el usuario elija la especie sobre la cual quiere comparar la longitud (<code>length</code>) contra el peso (<code>weight</code>).</li>
</ol>
<center>
<img src="figure/Ejercicio_2.png" alt="Ejercicio "/>
</center>
</div>
<div id="futuro-de-rstudio" class="slide section level1">
<h1>Futuro de RStudio</h1>
<ul>
<li><a href="http://shiny.rstudio.com/">Shiny by RStudio</a>: <em>A web application framework for R</em>.</li>
</ul>
<center>
<img src="figure/Shiny.png" width="100%" alt="Shiny"/>
</center>
</div>
<div id="referencias" class="slide section level1">
<h1>Referencias</h1>
<ul>
<li><a href="https://support.rstudio.com/hc/en-us/categories/200035113-Documentation">RStudio Support</a>: web de soporte de RStudio.</li>
<li><a href="http://www.rstudio.com/training">RStudio Training</a>: página de formación de RStudio.</li>
<li><a href="http://google-styleguide.googlecode.com/svn/trunk/Rguide.xml">Google's R Style Guide</a>: guía de estilo de programación en R según Google.</li>
</ul>
<!---
Comentario 
-->
</div>
</body>
</html>
